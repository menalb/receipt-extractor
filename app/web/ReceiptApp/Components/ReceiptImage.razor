@using ReceiptApp.Services;
@inject ImageService ImageService

<div>
    @if (isLoading)
    {
        <em>Loading image</em>
    }
    else
    {
        <img class="receipt-image" src="@ImageUrl" />
    }
    @if (!string.IsNullOrEmpty(Message))
    {
        <p>@Message</p>
    }
</div>


@code {
    [Parameter]
    public string ReceiptId { get; set; } = "";

    private string ImageUrl = "";
    private bool isLoading = false;
    private string Message = "";

    protected override async Task OnInitializedAsync()
    {
        isLoading = true;
        ImageUrl = await ImageService.GetImageURL(ReceiptId);
        if (string.IsNullOrEmpty(ImageUrl))
        {
            Message = "Image Not Available";
        }
        isLoading = false;
    }
}
